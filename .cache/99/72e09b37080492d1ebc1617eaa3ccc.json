{"id":"Vau8","dependencies":[{"name":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\package.json","includedInParent":true,"mtime":1640608262491},{"name":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\package.json","includedInParent":true,"mtime":1640596614331},{"name":"tslib","loc":{"line":1,"column":25},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\tslib\\tslib.es6.js"},{"name":"react","loc":{"line":2,"column":57},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\react\\index.js"},{"name":"../../core/index.js","loc":{"line":3,"column":30},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\core\\index.js"},{"name":"@wry/equality","loc":{"line":4,"column":22},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@wry\\equality\\lib\\equality.esm.js"},{"name":"../parser/index.js","loc":{"line":5,"column":49},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\parser\\index.js"},{"name":"../../errors/index.js","loc":{"line":6,"column":28},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\errors\\index.js"},{"name":"./useApolloClient.js","loc":{"line":7,"column":32},"parent":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useMutation.js","resolved":"C:\\Users\\pakev\\Desktop\\r_widgets\\react-widgets\\node_modules\\@apollo\\client\\react\\hooks\\useApolloClient.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useMutation = useMutation;\n\nvar _tslib = require(\"tslib\");\n\nvar _react = require(\"react\");\n\nvar _index = require(\"../../core/index.js\");\n\nvar _equality = require(\"@wry/equality\");\n\nvar _index2 = require(\"../parser/index.js\");\n\nvar _index3 = require(\"../../errors/index.js\");\n\nvar _useApolloClient = require(\"./useApolloClient.js\");\n\nfunction useMutation(mutation, options) {\n  var client = (0, _useApolloClient.useApolloClient)(options === null || options === void 0 ? void 0 : options.client);\n  (0, _index2.verifyDocumentType)(mutation, _index2.DocumentType.Mutation);\n\n  var _a = (0, _react.useState)({\n    called: false,\n    loading: false,\n    client: client\n  }),\n      result = _a[0],\n      setResult = _a[1];\n\n  var ref = (0, _react.useRef)({\n    result: result,\n    mutationId: 0,\n    isMounted: true,\n    client: client,\n    mutation: mutation,\n    options: options\n  });\n  {\n    Object.assign(ref.current, {\n      client: client,\n      options: options,\n      mutation: mutation\n    });\n  }\n  var execute = (0, _react.useCallback)(function (executeOptions) {\n    if (executeOptions === void 0) {\n      executeOptions = {};\n    }\n\n    var _a = ref.current,\n        client = _a.client,\n        options = _a.options,\n        mutation = _a.mutation;\n    var baseOptions = (0, _tslib.__assign)((0, _tslib.__assign)({}, options), {\n      mutation: mutation\n    });\n\n    if (!ref.current.result.loading && !baseOptions.ignoreResults) {\n      setResult(ref.current.result = {\n        loading: true,\n        error: void 0,\n        data: void 0,\n        called: true,\n        client: client\n      });\n    }\n\n    var mutationId = ++ref.current.mutationId;\n    var clientOptions = (0, _index.mergeOptions)(baseOptions, executeOptions);\n    return client.mutate(clientOptions).then(function (response) {\n      var _a, _b;\n\n      var data = response.data,\n          errors = response.errors;\n      var error = errors && errors.length > 0 ? new _index3.ApolloError({\n        graphQLErrors: errors\n      }) : void 0;\n\n      if (mutationId === ref.current.mutationId && !clientOptions.ignoreResults) {\n        var result_1 = {\n          called: true,\n          loading: false,\n          data: data,\n          error: error,\n          client: client\n        };\n\n        if (ref.current.isMounted && !(0, _equality.equal)(ref.current.result, result_1)) {\n          setResult(ref.current.result = result_1);\n        }\n      }\n\n      (_a = baseOptions.onCompleted) === null || _a === void 0 ? void 0 : _a.call(baseOptions, response.data);\n      (_b = executeOptions.onCompleted) === null || _b === void 0 ? void 0 : _b.call(executeOptions, response.data);\n      return response;\n    }).catch(function (error) {\n      var _a, _b;\n\n      if (mutationId === ref.current.mutationId && ref.current.isMounted) {\n        var result_2 = {\n          loading: false,\n          error: error,\n          data: void 0,\n          called: true,\n          client: client\n        };\n\n        if (!(0, _equality.equal)(ref.current.result, result_2)) {\n          setResult(ref.current.result = result_2);\n        }\n      }\n\n      if (baseOptions.onError || clientOptions.onError) {\n        (_a = baseOptions.onError) === null || _a === void 0 ? void 0 : _a.call(baseOptions, error);\n        (_b = executeOptions.onError) === null || _b === void 0 ? void 0 : _b.call(executeOptions, error);\n        return {\n          data: void 0,\n          errors: error\n        };\n      }\n\n      throw error;\n    });\n  }, []);\n  var reset = (0, _react.useCallback)(function () {\n    setResult({\n      called: false,\n      loading: false,\n      client: client\n    });\n  }, []);\n  (0, _react.useEffect)(function () {\n    return function () {\n      ref.current.isMounted = false;\n    };\n  }, []);\n  return [execute, (0, _tslib.__assign)({\n    reset: reset\n  }, result)];\n}"},"sourceMaps":null,"error":null,"hash":"bc46adc177468b4ac9e1efa8a8cb9c86","cacheData":{"env":{}}}